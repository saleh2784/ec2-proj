pipeline {
    options {
      ansiColor('xterm')
    }
    agent any
    
    parameters {
        choice (name: 'procces', choices: ['install', 'uninstall'],)
    }

    stages {
        stage('Clean') {
            steps {
                cleanWs()
            }
        }
        stage('install'){
        when {
          expression {
            params.vim == "install"
          }
        }
            steps{
            ansiblePlaybook(
                playbook: "ansible-scripts/install.yml",
                inventory: "hosts.ini",
                become: 'yes',
                extras: '-vvv',
                forks: 1,
                disableHostKeyChecking: true,
                credentialsId: 'ssh-key',
                colorized: true
            )
        }
        }
        stage('uninstall'){
        when {
          expression {
            params.vim == "uninstall"
          }
        }
            steps{
            ansiblePlaybook(
                playbook: "ansible-scripts/uninstall.yml",
                inventory: "hosts.ini",
                become: 'yes',
                extras: '-vvv',
                forks: 1,
                disableHostKeyChecking: true,
                credentialsId: 'ssh-key',
                colorized: true
          )
            }
        }
    }
}
